<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_invoice_document_FE" inherit_id="account.report_invoice_document">
            <xpath expr="//div[@class='page']/h2" position="after">
                Clave electronica:
                <small t-esc="o.number_electronic"/>
                <!--  img  t-if="o.number_electronic" t-att-src="'/report/barcode/QR/%s' % o.clave_envio_hacienda" height="200" width="200"/  -->
            </xpath>

            <!--xpath expr="//div[@name='address_not_same_as_shipping']/t[@t-set='address']" position="replace">
                    <div class="row">
                        <div class="col-12" name="left_address">
                            <span t-esc="o.partner_id.name"/>
                            <t t-if="o.partner_id.vat">
                                <br/>
                                <span t-if="o.company_id.country_id.vat_label" t-esc="o.company_id.country_id.vat_label"/>
                                <t t-else="">Tax ID</t>
                                :
                                <span t-field="o.partner_id.vat"/><br/>
                                <span t-if="o.company_id.email_bool"> Correo Electrónico:</span>
                                <span t-if="o.company_id.email_bool" t-field="o.partner_id.email"/>
                            </t>
                            <t t-if="o.partner_id.formatear_direccion()">
                                <br/>
                                <span t-esc="o.partner_id.formatear_direccion()"/>
                            </t>
                        </div>
                    </div>
            </xpath-->
            <xpath expr="//div[@name='address_same_as_shipping']/t[@t-set='address']" position="replace">
                    <div class="row">
                        <div class="col-12" name="left_address">
                            <span t-esc="o.partner_id.name"/>
                            <t t-if="o.partner_id.vat">
                                <br/>
                                <span t-if="o.company_id.country_id.vat_label" t-esc="o.company_id.country_id.vat_label"/>
                                <t t-else="">Tax ID</t>
                                :
                                <span t-field="o.partner_id.vat"/><br/>
                                <!--span t-if="o.partner_id.email"> Correo Electrónico:</span>
                                <span t-if="o.partner_id.email" t-field="o.partner_id.email"/><br/-->
                                <span t-if="o.partner_id.street" t-field="o.partner_id.street"/>,
                                <span t-if="o.partner_id.state_id" t-field="o.partner_id.state_id"/>,
                                <span t-if="o.partner_id.country_id" t-field="o.partner_id.country_id"/>
                            </t>
                        </div>
                    </div>
            </xpath>
            <!--xpath expr="//div[@name='no_shipping']/t[@t-set='address']" position="replace">
                    <div class="row">
                        <div class="col-12" name="left_address">
                            <span t-esc="o.partner_id.name"/>
                            <t t-if="o.partner_id.vat">
                                <br/>
                                <span t-if="o.company_id.country_id.vat_label" t-esc="o.company_id.country_id.vat_label"/>
                                <t t-else="">Tax ID</t>
                                :
                                <span t-field="o.partner_id.vat"/><br/>
                                <span t-if="o.company_id.email_bool"> Correo Electrónico:</span>
                                <span t-if="o.company_id.email_bool" t-field="o.partner_id.email"/>
                            </t>
                            <t t-if="o.partner_id.formatear_direccion()">
                                <br/>
                                <span t-esc="o.partner_id.formatear_direccion()"/>
                            </t>
                        </div>
                    </div>
            </xpath-->
<!--            <xpath expr="//div[@class='page']" position="inside">-->
<!--                <p t-if="o.type in ('out_invoice', 'out_refund')">-->
<!--                    &lt;!&ndash;                      <small> <strong>DESPUES DE 8 DIAS NATURALES NO SE ACEPTAN DEVOLUCIONES. Acepto que recibo la mercadería en perfecto estado.</strong></small>  &ndash;&gt;-->
<!--                    <br/>-->
<!--                    <small>Emitida conforme lo establecido en la resolución de Facturación Electrónica, Nº-->
<!--                        DGT-R-033-2019 veinte de junio de dos mil diecinueve de la Dirección General de-->
<!--                        Tributación.</small>-->
<!--                    <small>Versión: 4.3</small>-->
<!--                    &lt;!&ndash;  t t-if="o.state == 'posted'">-->
<!--                                            <br/>-->
<!--                                            <img t-att-src="'/report/barcode/QR/%s' % o.get_qr_url()" height="200" width="200"/>-->
<!--                                        </t  &ndash;&gt;-->
<!--                </p>-->
<!--            </xpath>-->
            <xpath expr="//h2/span[1]" position="replace">
                <!--span t-if="o.move_type == 'out_invoice' and o.state == 'posted' and o.tipo_documento" t-esc="dict(o.with_context({'from_print': 1}).get_tipos_documento())[o.tipo_documento]"/-->
                <!--span t-if="o.move_type == 'out_invoice' and o.state == 'posted' and o.tipo_documento" t-esc="o.tipo_documento"/-->
                        <t t-if="o.move_type == 'in_invoice'">
                            <span t-if="not o.number_electronic">FACTURA</span>
                            <span t-if="o.number_electronic and o.tipo_documento=='FE'">Factura Electrónica</span>
                            <span t-if="o.number_electronic and o.tipo_documento=='FEC'">Factura Electrónica COMPRA</span>
                            <span t-if="o.number_electronic and o.tipo_documento=='TE'">Tiquete Electrónico</span>
                        </t>
                        <t t-if="o.move_type == 'out_invoice'">
                            <span t-if="o.number_electronic and o.tipo_documento=='FE'">Factura Electrónica</span>
                            <span t-if="o.number_electronic and o.tipo_documento=='TE'">Tiquete Electrónico</span>
                            <span t-if="o.number_electronic and o.tipo_documento=='FEE'">Factura Electrónica DE EXPORTACION</span>
                            <span t-if="o.number_electronic and o.tipo_documento=='ND'">Nota Débito Electrónica</span>
                            <span t-if="not o.number_electronic">FACTURA</span>
                        </t>
                        <t t-if="o.move_type == 'out_refund' or o.move_type == 'in_refund'">
                            <span t-if="o.number_electronic">NOTA DE CRÉDITO ELECTRONICA</span><br/>
                            <span t-if="not o.number_electronic">NOTA DE CRÉDITO</span><br/>
                        </t>

            </xpath>
            <xpath expr="//h2/span[4]" position="replace">
                <span t-if="o.move_type == 'out_refund'">Nota de Crédito</span>
            </xpath>

            ##cambios
<!--            <xpath expr="//table/thead/tr" position="attributes">-->
<!--                <attribute name="style">line-height: 10pt</attribute>-->
<!--            </xpath>-->
<!--            <xpath expr="//table/tbody/t[3]/tr" position="attributes">-->
<!--                <attribute name="style">line-height: 10pt; font-size: 100%;</attribute>-->
<!--            </xpath>-->

            <!-- Reduce el espacio entre el nombre de factura e información de la misma -->
            <xpath expr="//div[@id='informations']" position="attributes">
                <attribute name="class">row mt-1 mb-1</attribute>
            </xpath>

            <xpath expr="//div[@id='informations']" position="after">
                <div id="informations_second_section" class="row mt0 mb0">
                    <!--
                    <div class="col-auto mw-100 mb-2" t-if="o.invoice_user_id" name="invoice_user_id">
                        <strong>Vendedor:</strong>
                        <p class="m-0" t-field="o.invoice_user_id"/>
                    </div>
                    <div class="col-auto mw-100 mb-2" t-if="o.sale_create_user_id" name="sale_create_user_id">
                        <strong>Usuario:</strong>
                        <p class="m-0" t-field="o.sale_create_user_id"/>
                    </div>
                    -->
                    <div class="col-auto mw-100 mb-2" t-if="o.ref" name="reference">
                        <strong>Referencia:</strong>
                        <p class="m-0" t-field="o.ref"/>
                    </div>
                    <!--div class="col-auto mw-100 mb-2" t-if="o.sale_purchase_order" name="sale_purchase_order">
                        <strong>N° Orden de Compra:</strong>
                        <p class="m-0" t-field="o.sale_purchase_order"/>
                    </div-->
                    <div class="col-auto mw-100 mb-2" name="exchange_rate">
                        <strong>Tipo Cambio:</strong>
                        <p class="m-0" t-esc="round(o.amount_total_signed / o.amount_total_in_currency_signed,2)"/>
                    </div>
                </div>
            </xpath>
            <xpath expr="//div[@name='customer_code']" position="replace">
                <div class="col-auto mw-100 mb-2" t-if="o.invoice_user_id" name="invoice_user_id">
                    <strong>Vendedor:</strong>
                    <p class="m-0" t-field="o.invoice_user_id"/>
                </div>
            </xpath>
            <xpath expr="//div[@name='reference']" position="replace">
            </xpath>
            <!--xpath expr="//td[hasclass('o_price_total')][1]" position="replace">
                <td class="text-right o_price_total">
                    <span class="text-nowrap" t-field="line.price_qty_amount"/>
                </td>
            </xpath-->
<!--            <xpath expr="//div[@id='total']/div/table/tr/td" position="before">#TODO-->
<!--                <tr class="border-black o_subtotal" style="">-->
<!--                    <td>Subtotal</td>-->
<!--                    <td class="text-right">-->
<!--                        <span t-field="o.amount_without_discount_and_tax"/>-->
<!--                    </td>-->
<!--                </tr>-->
<!--                <tr class="border-black o_subtotal" style="">-->
<!--                    <td>Descuento</td>-->
<!--                    <td class="text-right">-->
<!--                        <span t-field="o.amount_discount"/>-->
<!--                    </td>-->
<!--                </tr>-->
<!--            </xpath>-->
<!--            <xpath expr="//div[@id='total']/div/table/tr[2]" position="after">-->
<!--                <tr class="border-black o_total" style="">-->
<!--                    <td>Total moneda local</td>-->
<!--                    <td class="text-right">-->
<!--                        <span t-field="o.amount_total_local"/>-->
<!--                    </td>-->
<!--                </tr>-->
<!--            </xpath>-->
            <xpath expr="//div[@id='qrcode']" position="after">
                <div class="row">
                    <!--div class="col-6" t-if="o.company_id.invoice_bank_accounts">
                        <b>Cuentas Bancarias</b><br/>
                        <p t-if="o.company_id.invoice_bank_accounts" name="invoice_bank_accounts" style="line-height: 10pt; font-size: 100%;">
                            <span t-field="o.company_id.invoice_bank_accounts"/>
                        </p>
                    </div>
                    <div class="col-6" name="left_address" t-if="o.company_id.invoice_conditions">
                        <b>Condiciones de factura</b><br/>
                        <p t-if="o.company_id.invoice_bank_accounts" name="invoice_bank_accounts" style="line-height: 10pt; font-size: 100%;">
                            <span t-field="o.company_id.invoice_conditions"/>
                        </p>
                    </div-->
                </div><br/>
                <p name="invoice_bank_accounts" style="line-height: 10pt; font-size: 100%;" class="mt-0 mb-0">
                    <b>Recibido conforme</b><br/><br/>
                    <b>Nombre _________________________ N° Cédula _________________________ Firma _________________________</b>
                </p>
                <p t-if="o.move_type in ('out_invoice', 'out_refund')" style="margin: 0px; line-height: 10pt; font-size: 100%;">
                    <br/>
                    <small>Emitida conforme lo establecido en la resolución de Facturación Electrónica, Nº
                        DGT-R-033-2019 veinte de junio de dos mil diecinueve de la Dirección General de
                        Tributación.</small>
                    <small>Versión: 4.3</small>
                </p>
                <!--p t-if="o.contingencia and o.state_tributacion != 'aceptado'" style="color: #ff0000; font-size: 20px;">
                   Este comprobante no puede ser utilizado para fines tributarios, por lo cual, no se permitirá su uso para respaldo de créditos o gastos.
                </p--><br/>
            </xpath>
             <xpath expr="//p[@name='payment_communication']" position="attributes">
                <attribute name="style">margin: 0px;</attribute>
            </xpath>
            <xpath expr="//p[@name='incoterm']" position="attributes">
                <attribute name="style">margin: 0px;</attribute>
            </xpath>
<!--            <xpath expr="//table[@name='invoice_line_table']" position="attributes">-->
<!--                <attribute name="style">line-height: 10pt; font-size: 100%;</attribute>-->
<!--            </xpath>-->
            <xpath expr="//div[@name='payment_term']" position="attributes">
                <attribute name="style">line-height: 10pt; font-size: 100%;</attribute>
            </xpath>
            <xpath expr="//p[@name='payment_communication']" position="attributes">
                <attribute name="style">font-size: 100%;</attribute>
            </xpath>
<!--            <xpath expr="//p[6]" position="attributes">-->
<!--                <attribute name="style">line-height: 10pt; font-size: 100%;</attribute>-->
<!--            </xpath>-->

            <!-- Reduce el espacio entre el titulo o número de factura y la descripción del cliente -->
            <xpath expr="/t[1]/t[1]/div[2]" position="attributes">
                <attribute name="class">mt-1</attribute>
            </xpath>

            <!-- Reduce el tamaño del texto de descripción de los productos -->
            <xpath expr="//td[@name='account_invoice_line_name']/span" position="attributes">
                <attribute name="class">small</attribute>
            </xpath>

            <!-- Reduce el espacio entre los totales de factura y la conformidad del cliente -->
            <xpath expr="//div[@class='clearfix mb-4']" position="attributes">
                <attribute name="class">clearfix mb-1</attribute>
            </xpath>
    </template>
    </odoo>
